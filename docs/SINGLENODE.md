核心方案

1. **配置添加Redis开关** - 在config.yaml中添加`redis.enabled`配置项
2. **条件路由逻辑** - Redis关闭时，服务发现返回本地节点，分片选择本地节点
3. **直接MinIO访问** - Redis关闭时，通过MinIO对象路径直接获取数据索引

关键修改点

* 服务发现：Redis关闭时返回本地节点
* 写入协调器：Redis关闭时路由到本地节点
* 查询协调器：Redis关闭时直接本地查询
* 存储工厂：Redis关闭时跳过Redis连接池
* 主服务启动：Redis关闭时跳过服务注册

数据索引策略

* Redis开启：使用现有Redis索引
* Redis关闭：直接扫描MinIO路径`TABLE/ID/YYYY-MM-DD/`

优势

* 最小侵入性修改
* 完全向后兼容
* 逻辑简单可靠
* 易于实施和测试
* 项目初期使用单节点模式，数据量增长后再切换到分布式模式